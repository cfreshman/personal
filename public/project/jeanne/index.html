<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fuck u</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <style>
      html, body {
        height: 100%;
      }
      #insult-container {
        margin: 1rem;
      }
      #insult {
        padding: .35rem;
      }
      #insult::after {
        content: "↻";
        margin-left: .25rem;
        opacity: .5;
      }
    </style>
  </head>
  <body>
    <div id="insult-container">
      <span class="d-inline-block align-middle">you are <span id="a">a</span></span>
      <button id="insult" class="btn btn-light">error</button>
    </p><!-- <button id="reload">↻</button> -->

    <script>
      const q = (s) => document.querySelector(s);
      const sample = (arr) => arr[Math.floor(Math.random() * arr.length)];
      const encode = (s) => s.replaceAll(' ', '+');
      const decode = (s) => s.replaceAll('+', ' ');

      const insultElem = q('#insult');
      const aElem = q('#a');

      Promise.all(['nouns.txt', 'adjectives.txt'].map(url =>
        fetch(url).then(resp => resp.text())
      )).then(texts => {
        const [nouns, adjs] = texts.map(text => text.split('\n'));

        const doInsult = (insult) => {
          insult = insult ||  sample(adjs) + ' ' + sample(nouns);
          insultElem.textContent = insult;
          // a.textContent = 'aeiou'.includes(insult[0]) ? 'an' : 'a ';
          window.location.hash = '#' + encode(insult);
        }
        doInsult(decode(window.location.hash.slice(1)));
        q('#insult').addEventListener('click', () => doInsult());
      });
    </script>
  </body>
</html>